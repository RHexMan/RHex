### XS_usage

See:

`man h2xs`

especially the section "Extension based on .h and .c files"

See also https://perldoc.perl.org/perlxstut.html, especially the section "Dynamic Loading versus Static Loading" and Example 4.  However, as discussed below, we don't need to change `Makefile.PL`. or the `.xs` file at all.  See the later example for how more complex data structures are passed in an out of the glue function calls.

https://perldoc.perl.org/perlxs.html#EXAMPLES

`man h2xs`

works.

======================

From man h2xs (with a few name changes)


Extension based on .h and .c files

	Suppose that you have some C files implementing some functionality, and the corresponding header files.  How to create an extension which makes this functionality accessible in Perl?  The example below assumes that the header files are interface_simple.h and interface_hairy.h, and you want the perl module  e named as "RSTATIC".  If you need some preprocessor directives and/or linking with external libraries, see the flags "-F", "-L" and "-l" in "OPTIONS".

	cd to the parent of the RSTATIC folder you want to create.

	Start with a dummy run of h2xs:
		h2xs -Afn RSTATIC

		The only purpose of this step is to create the needed directories, and let you know the names of these directories.  From the output you can see that the directory for the extension is Ext/Ension.

	Copy C and H files
		Copy your header files and C files into RSTATIC.

	Create the extension
	Run h2xs, overwriting older autogenerated files:
		h2xs -Oxan RSTATIC myfile.h [myfile1.h etc]

		h2xs looks for header files after changing to the extension directory, so it will find your header files OK.  This will lib/RSTATIC.pm and RSTATIC.xs, among other things.  Notice that the include has the form <myfile.h>, and that the glue code has been written for you.

	cd into RSTATIC, run
		perl Makefile.PL

		As usual, this creates a unix-style makefile.

	Built a static library, type
		make perl

	Add appropriate test code to t/RSTATIC.t (remembering to change the number of tests in the "use Test::More tests => 2;" line.

		make test_static

		Note that the code in RSTATIC.t is pure perl!

	If you are happy with the results, type
		make install

		This will put your xs module in the local perl library, in my case

		/Users/richmiller/perl5/perlbrew/perls/perl-5.28.1/lib/site_perl/5.28.1/darwin-2level/auto/RSTATIC/

		except

		/Users/richmiller/perl5/perlbrew/perls/perl-5.28.1/lib/site_perl/5.28.1/darwin-2level/RSTATIC.pm

		and also made an entry into /Users/richmiller/perl5/perlbrew/perls/perl-5.28.1/man/man3/RSTATIC.3

		and appended installation info to /Users/richmiller/perl5/perlbrew/perls/perl-5.28.1/lib/5.28.1/darwin-2level/perllocal.pod

		From perl, the call should be of the form
			RSTATIC::foo(1, 2, "0.0");

			or, with use RSTATIC qw (foo); just
			foo(a,b,c);

